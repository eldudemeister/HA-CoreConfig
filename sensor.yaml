 - platform: badnest
 - platform: time_date
   display_options:
      - 'time'
      - 'date'
 - platform: netdata
   host: '192.168.68.117'
   port: '19999'
   name: PhosconPi
   resources:
    system.cpu:
      data_group: system.cpu
      element: system
    system.ram:
      data_group: 'system.ram'
      element: 'used'
      icon: mdi:chip
    system.ram:
      data_group: 'system.ram'
      element: 'free'
      icon: mdi:chip
 - platform: version
   name: Installed Version
   source: local
 - platform: version
   name: Latest Available Version
   beta: false
   image: raspberrypi3
   source: hassio
 - platform: dnsip
 - platform: cert_expiry
   host: bridgemanor.co.uk
 - platform: rest
   resource: http://127.0.0.1:61208/api/3/uptime
   name: "Linux Server Uptime"
   value_template: '{{ value_json }}'
   scan_interval: 60
 - platform: rest
   resource: http://192.168.68.110:7777/container/plex
   name: Plex Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/plex/stats
   name: Plex Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: plex_memory_average
   entities:
     - sensor.plex_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/plex/stats
   name: Plex CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: plex_cpu_average
   entities:
     - sensor.plex_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/iCloudPD-matt
   name: iCloudPD Status
   value_template: '{{ value_json.state }}' 
 - platform: rest
   resource: http://192.168.68.110:7777/container/iCloudPD-matt/stats
   name: iCloudPD Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: icloudpd_memory_average
   entities:
     - sensor.icloudpd_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/iCloudPD-matt/stats
   name: iCloudPD CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: icloudpd_cpu_average
   entities:
     - sensor.icloudpd_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/sonarr
   name: Sonarr Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/sonarr/stats
   name: Sonarr Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: sonarr_memory_average
   entities:
     - sensor.sonarr_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/sonarr/stats
   name: Sonarr CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: sonarr_cpu_average
   entities:
     - sensor.sonarr_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/radarr
   name: Radarr Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/radarr/stats
   name: Radarr Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: radarr_memory_average
   entities:
     - sensor.radarr_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/radarr/stats
   name: Radarr CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: radarr_cpu_average
   entities:
     - sensor.radarr_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/nzbget
   name: NZBGet Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/nzbget/stats
   name: NZBGet Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: nzbget_memory_average
   entities:
     - sensor.nzbget_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/nzbget/stats
   name: NZBGet CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: nzbget_cpu_average
   entities:
     - sensor.nzbget_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/bazarr
   name: Bazarr Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/bazarr/stats
   name: Bazarr Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: bazarr_memory_average
   entities:
     - sensor.bazarr_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/bazarr/stats
   name: Bazarr CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: bazarr_cpu_average
   entities:
     - sensor.bazarr_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/channels-dvr
   name: Channels DVR Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/channels-dvr/stats
   name: Channels DVR Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: channelsdvr_memory_average
   entities:
     - sensor.channelsdvr_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/channels-dvr/stats
   name: Channels DVR CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: channelsdvr_cpu_average
   entities:
     - sensor.channelsdvr_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/ombi
   name: Ombi Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/ombi/stats
   name: Ombi Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: ombi_memory_average
   entities:
     - sensor.ombi_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/ombi/stats
   name: Ombi CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: ombi_cpu_average
   entities:
     - sensor.ombi_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/letsencrypt
   name: LetsEncrypt Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/letsencrypt/stats
   name: LetsEncrypt Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: letsencrypt_memory_average
   entities:
     - sensor.letsencrypt_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/letsencrypt/stats
   name: LetsEncrypt CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: letsencrypt_cpu_average
   entities:
     - sensor.letsencrypt_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/ha_dockermon
   name: HA Dockermon Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/ha_dockermon/stats
   name: HA Dockermon Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: ha_dockermon_memory_average
   entities:
     - sensor.ha_dockermon_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/ha_dockermon/stats
   name: HA Dockermon CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: ha_dockermon_cpu_average
   entities:
     - sensor.ha_dockermon_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_bitwarden_1
   name: BitWarden Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_bitwarden_1/stats
   name: BitWarden Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: bitwarden_memory_average
   entities:
     - sensor.bitwarden_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_bitwarden_1/stats
   name: BitWarden CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: bitwarden_cpu_average
   entities:
     - sensor.bitwarden_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/home-assistant
   name: Home-Assistant Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_bitwarden_1/stats
   name: Home Assistant Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: homeassistant_memory_average
   entities:
     - sensor.homeassistant_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/home-assisstant/stats
   name: Home Assistant CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: homeassistant_cpu_average
   entities:
     - sensor.homeassistant_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_monitoring_1
   name: Glances Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_monitoring_1/stats
   name: Glances Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: glances_memory_average
   entities:
     - sensor.glances_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_monitoring_1/stats
   name: Glances CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: glances_cpu_average
   entities:
     - sensor.glances_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/node-red
   name: Node-Red Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/node-red/stats
   name: Node-Red Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: nodered_memory_average
   entities:
     - sensor.nodered_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/node-red/stats
   name: Node-Red CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: nodered_cpu_average
   entities:
     - sensor.nodered_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/mosquitto
   name: Mosquitto Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/mosquitto/stats
   name: Mosquitto Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: mosquitto_memory_average
   entities:
     - sensor.mosquitto_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/mosquitto/stats
   name: Mosquitto CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: mosquitto_cpu_average
   entities:
     - sensor.mosquitto_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/adbd
   name: Android Debug Bridge Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/adbd/stats
   name: Android Debug Bridge Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: adbd_memory_average
   entities:
     - sensor.adbd_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/adbd/stats
   name: Android Debug Bridge CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: adbd_cpu_average
   entities:
     - sensor.adbd_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/code-server
   name: Code Server Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/code-server/stats
   name: Code Server Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: codeserver_memory_average
   entities:
     - sensor.codeserver_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/code-server/stats
   name: Code Server CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: codeserver_cpu_average
   entities:
     - sensor.codeserver_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_esphome_1
   name: ESPHome Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_esphome_1/stats
   name: ESPHome Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: esphome_memory_average
   entities:
     - sensor.esphome_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/docker_esphome_1/stats
   name: ESPHome CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: esphome_cpu_average
   entities:
     - sensor.esphome_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/tautulli
   name: Tautulli Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/tautulli/stats
   name: Tautulli Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: tautulli_memory_average
   entities:
     - sensor.tautulli_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/tautulli/stats
   name: Tautulli CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: tautulli_cpu_average
   entities:
     - sensor.tautulli_cpu
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/mariadb
   name: MariaDB Status
   value_template: '{{ value_json.state }}'
 - platform: rest
   resource: http://192.168.68.110:7777/container/mariadb/stats
   name: MariaDB Memory
   scan_interval: 900
   value_template: '{{ (value_json.memory_stats.usage /1024/1024) |round(2) }}'
   unit_of_measurement: 'MB'
 - platform: average
   name: mariadb_memory_average
   entities:
     - sensor.mariadb_memory
   duration:
     days: 2
 - platform: rest
   resource: http://192.168.68.110:7777/container/mariadb/stats
   name: MariaDB CPU
   scan_interval: 900
   value_template: '{{ (value_json.cpu_stats.cpu_usage.total_usage /1000/1000/1000/1000) |round(2) }}'
   unit_of_measurement: '%'
 - platform: average
   name: mariadb_cpu_average
   entities:
     - sensor.mariadb_cpu
   duration:
     days: 2
 - platform: template
   sensors:
      speedtest_lastrun:
        entity_id: sensor.speedtest_download # Entity to monitor for changes
        friendly_name: "Speed Test Last Run"
        value_template: "{{as_timestamp(states.sensor.speedtest_download.last_changed) | timestamp_custom('%A %d-%b-%y, %H:%M:%S')}}"
 - platform: mqtt
   state_topic: 'monitor/monitorpi/matts_iphone'
   value_template: '{{ value_json.confidence }}'
   unit_of_measurement: '%'
   name: 'Matt House'
 - platform: mqtt
   state_topic: 'monitor/officemonitor/matts_iphone'
   value_template: '{{ value_json.confidence }}'
   unit_of_measurement: '%'
   name: 'Matt Office'
 - platform: min_max
   name: "Matt Home Occupancy Confidence"
   type: max
   round_digits: 0
   entity_ids:
    - sensor.matt_house
    - sensor.matt_office
 - platform: mqtt
   state_topic: 'monitor/monitorpi/amys_iphone'
   value_template: '{{ value_json.confidence }}'
   unit_of_measurement: '%'
   name: 'Amy House'
 - platform: mqtt
   state_topic: 'monitor/officemonitor/amys_iphone'
   value_template: '{{ value_json.confidence }}'
   unit_of_measurement: '%'
   name: 'Amy Office'
 - platform: min_max
   name: "Amy Home Occupancy Confidence"
   type: max
   round_digits: 0
   entity_ids:
    - sensor.amy_office
    - sensor.amy_house
 - platform: template
   sensors:
     number_of_lights_on: 
        unit_of_measurement: 'on'
        value_template: >
          {% set lights = [
            states.light.bedroom_light,
            states.light.hall_light,
            states.light.cubby_light,
            states.light.bedside_light,
            states.light.wled,
            states.light.bulb
            ] %}
          {{ lights | selectattr('state','eq','on') | list | count }} 